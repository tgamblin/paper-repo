\begin{Verbatim}[commandchars=\\\{\},fontsize=\footnotesize]
\PY{p}{\PYZob{}} \PY{n+nf}{attr}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}hash\PYZdq{}}\PY{p}{,} \PY{n+nf}{node}\PY{p}{(}\PY{n+nv}{Name}\PY{p}{)}\PY{p}{,} \PY{n+nv}{Hash}\PY{p}{)}\PY{l+s+sAtom}{:} \PY{n+nf}{installed\PYZus{}hash}\PY{p}{(}\PY{n+nv}{Name}\PY{p}{,} \PY{n+nv}{Hash}\PY{p}{)} \PY{p}{\PYZcb{}} \PY{l+m+mi}{1}
  \PY{p}{:\PYZhy{}} \PY{n+nf}{node}\PY{p}{(}\PY{n+nv}{Name}\PY{p}{)}\PY{p}{.}
\PY{n+nf}{impose}\PY{p}{(}\PY{n+nv}{Hash}\PY{p}{,} \PY{n+nv}{Node}\PY{p}{)} \PY{p}{:\PYZhy{}} \PY{n+nf}{attr}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}hash\PYZdq{}}\PY{p}{,} \PY{n+nv}{Node}\PY{p}{,} \PY{n+nv}{Hash}\PY{p}{)}\PY{p}{,} \PY{n+nv}{Node}\PY{p}{.}
\PY{n+nf}{build}\PY{p}{(}\PY{n+nv}{Node}\PY{p}{)} \PY{p}{:\PYZhy{}} \PY{n+nv}{Node}\PY{p}{,} \PY{o}{not} \PY{n+nf}{attr}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}hash\PYZdq{}}\PY{p}{,} \PY{n+nv}{Node}\PY{p}{,} \PY{n+nv}{Hash}\PY{p}{)}\PY{p}{.}
\PY{l+s+sAtom}{\PYZsh{}}\PY{l+s+sAtom}{minimize} \PY{p}{\PYZob{}} \PY{l+m+mi}{100}\PY{p}{,} \PY{n+nv}{PackageNode} \PY{l+s+sAtom}{:} \PY{n+nf}{build}\PY{p}{(}\PY{n+nv}{PackageNode}\PY{p}{)} \PY{p}{\PYZcb{}}
\end{Verbatim}
